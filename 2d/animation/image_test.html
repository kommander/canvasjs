<html>
<head>
  <title>canvas 2d image animation demo</title>
  <script type="text/javascript" src="loop.js"></script>
</head>
<body>
<div id="title"></div>
<div style="float: left;">
<canvas id="testCanvas" width="400" height="400" />
</div>
<script type="text/javascript">
var canvas = document.getElementById('testCanvas');
var context = canvas.getContext('2d');

var img = new Image();
img.src = 'tile01.png';

img.onload = function(){
  context.drawImage(img, 0, 0);
  var imgData = context.getImageData(0, 0, 32, 32);

  var loop = new Loop(canvas);
  loop.maxFrameRate = 60;
  for(var i = 0; i < 100; i++)
  {
    var im = new image();
    im.data = imgData;
  
    loop.add(im);
  }
  loop.start();
}

function image()
{
  this.data = null;
  
  this.draw = function(context)
  {
    context.putImageData(this.data, randRange(0, 368), randRange(0, 368));
  };
}

function randRange(minNum, maxNum) 
{
    return (Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum);
}

</script>

</body>
</html>